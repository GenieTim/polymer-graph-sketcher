var _e=Object.defineProperty;var me=i=>{throw TypeError(i)};var Oe=(i,e,t)=>e in i?_e(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>Oe(i,typeof e!="symbol"?e+"":e,t),fe=(i,e,t)=>e.has(i)||me("Cannot "+t);var K=(i,e,t)=>(fe(i,e,"read from private field"),t?t.call(i):e.get(i)),ye=(i,e,t)=>e.has(i)?me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),le=(i,e,t,s)=>(fe(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();class y{constructor(e,t){r(this,"x");r(this,"y");this.x=e,this.y=t}}class I extends y{constructor(e,t){e instanceof y?(super(e.x,e.y),this.x=e.x,this.y=e.y):(super(e,t),this.x=e,this.y=t)}add(e){return new I(this.x+e.x,this.y+e.y)}subtract(e){return new I(this.x-e.x,this.y-e.y)}multiply(e){return new I(this.x*e,this.y*e)}toString(){return`(${this.x}, ${this.y})`}}var L;const b=class b{constructor(e=new y(825,445),t="#FFFFFF",s=10){r(this,"isScaled",!1);r(this,"canvasSize");r(this,"backgroundColor");r(this,"imageScaleFactor");r(this,"disablePBC",!1);this.canvasSize=e,this.backgroundColor=t,this.imageScaleFactor=s}static get instance(){return K(b,L)||le(b,L,new b),K(b,L)}static fromJSON(e){return le(b,L,new b(new y(e.canvasSize.x,e.canvasSize.y),e.backgroundColor,e.imageScaleFactor)),"disablePBC"in e&&(K(b,L).disablePBC=e.disablePBC),K(b,L)}};L=new WeakMap,ye(b,L);let S=b;class ve{constructor(e=null,t=1,s=1,o="#000",n="#000"){r(this,"center");r(this,"radius");r(this,"strokeWidth");r(this,"fillColor");r(this,"strokeColor");this.center=e||new y(0,0),this.radius=t,this.strokeWidth=s,this.fillColor=o,this.strokeColor=n}setCenter(e){this.center=e}setRadius(e){this.radius=e}draw(e){e.beginPath(),e.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI),this.fillColor&&(e.fillStyle=this.fillColor,e.fill()),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.stroke()}}class ae{constructor(e,t,s=!1,o="#000",n=2,a=6,c=4,l=2){r(this,"from");r(this,"to");r(this,"dashed");r(this,"zigZagged");r(this,"color");r(this,"lineWidth");r(this,"zigzagSpacing");r(this,"oneZigZagLength");r(this,"straightLengthWhenZigZag");r(this,"lineRadians");r(this,"lineLength");this.from=e,this.to=t,this.dashed=!1,this.zigZagged=s,this.color=o,this.lineWidth=n,this.zigzagSpacing=a,this.oneZigZagLength=c,this.straightLengthWhenZigZag=l,this.lineRadians=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);const u=this.from.x-this.to.x,m=this.from.y-this.to.y;this.lineLength=Math.sqrt(u*u+m*m)}setFrom(e){this.from=e}setTo(e){this.to=e}getFrom(){return this.from}getTo(){return this.to}draw(e){const t=S.instance;var s=this.to.x-this.from.x,o=this.to.y-this.from.y;const n=Math.abs(o)>.5001*t.canvasSize.y,a=Math.abs(s)>.5001*t.canvasSize.x;if((n||a)&&!t.disablePBC){[new ae(new y(this.from.x,this.from.y),new y(this.to.x+t.canvasSize.x*(a?s<0?1:-1:0),this.to.y+t.canvasSize.y*(n?o<0?1:-1:0)),this.zigZagged,this.color,this.lineWidth,this.zigzagSpacing,this.oneZigZagLength,this.straightLengthWhenZigZag),new ae(new y(this.to.x,this.to.y),new y(this.from.x+t.canvasSize.x*(a?s<0?-1:1:0),this.from.y+t.canvasSize.y*(n?o<0?-1:1:0)),this.zigZagged,this.color,this.lineWidth,this.zigzagSpacing,this.oneZigZagLength,this.straightLengthWhenZigZag)].forEach(c=>c.draw(e));return}this.dashed&&e.setLineDash([4,2]),e.lineCap="round",e.lineWidth=this.lineWidth,e.strokeStyle=this.color,this.zigZagged?this.drawZigZagged(e):(e.beginPath(),e.moveTo(this.from.x,this.from.y),e.lineTo(this.to.x,this.to.y)),e.stroke()}drawZigZagged(e){e.save(),e.beginPath(),e.translate(this.from.x,this.from.y),e.rotate(this.lineRadians),e.moveTo(0,0),e.lineTo(this.straightLengthWhenZigZag,0);let t=this.straightLengthWhenZigZag;for(let s=0;t<this.lineLength-this.straightLengthWhenZigZag;s++){t=(s+1)*this.zigzagSpacing;const o=s%2==0?-this.oneZigZagLength:this.oneZigZagLength;e.lineTo(t,o)}e.lineTo(this.lineLength-this.straightLengthWhenZigZag,0),e.lineTo(this.lineLength,0),e.restore()}setDashed(e){this.dashed=e}setZigZagged(e){this.zigZagged=e}}class he{constructor(e=null,t=100,s=100,o=2,n="#000",a=null){r(this,"topLeft");r(this,"width");r(this,"height");r(this,"strokeColor");r(this,"lineWidth");r(this,"fillColor");this.topLeft=e||new y(0,0),this.width=t,this.height=s,this.strokeColor=n,this.lineWidth=o,this.fillColor=a}draw(e){e.beginPath(),e.rect(this.topLeft.x,this.topLeft.y,this.width,this.height),this.fillColor?e.fillStyle=this.fillColor:e.fillStyle="transparent",e.fill(),e.lineWidth=this.lineWidth,this.strokeColor&&(e.strokeStyle=this.strokeColor,e.stroke())}}class p{constructor(e,t,s=5,o=1,n="#000",a="#000"){r(this,"id");r(this,"coordinates");r(this,"radius");r(this,"strokeWidth");r(this,"fillColor");r(this,"strokeColor");if(typeof e!="number"||!Number.isInteger(e)||e<0)throw new Error("Invalid `id` parameter. It must be a non-negative integer, got `"+e+"`.");this.id=e,this.coordinates=t,this.radius=s,this.strokeWidth=o,this.fillColor=n,this.strokeColor=a}}class ge{constructor(e,t,s,o=1,n="#000"){r(this,"fromId");r(this,"toId");r(this,"weight");r(this,"color");r(this,"id");this.fromId=e,this.toId=t,this.id=s,this.weight=o,this.color=n}getOtherNodeId(e){return this.fromId===e?this.toId:this.fromId}}class Re{constructor(){r(this,"nodes");r(this,"edges");r(this,"scalingFactor");r(this,"zigzagSpacing",4);r(this,"zigzagLength",3);r(this,"zigzagEndLengths",1.5);r(this,"maxNodeId",0);this.nodes={},this.edges=[],this.scalingFactor=new y(1,1)}clear(){this.nodes={},this.edges=[]}setNode(e){this.nodes[e.id]=e,this.maxNodeId=Math.max(this.maxNodeId,e.id)}addEdge(e,t,s="#000",o=1){if(!(e in this.nodes)||!(t in this.nodes))throw new Error("One or both nodes do not exist in the graph.");return this.edges.push(new ge(e,t,this.edges.length,o,s)),this.edges.length-1}getNode(e){if(!(e in this.nodes))throw new Error(`Node with id "${e}" does not exist.`);return this.nodes[e]}getNrOfNodes(){return Object.keys(this.nodes).length}getNrOfEdges(){return this.edges.length}getAllNodeIds(){return Object.values(this.nodes).map(e=>e.id)}getNextNodeId(){return this.maxNodeId+1}getAllNodes(){return Object.values(this.nodes)}getAllEdges(){return this.edges}getNodesConnectedToNode(e){return this.getEdgesInvolvingNode(e).map(t=>this.nodes[t.fromId===e?t.toId:t.fromId])}deepConnectedTo(e){const t=new Set,s=[],o=[e.id];for(;o.length>0;){const n=o.shift();if(t.has(n))continue;t.add(n),s.push(this.getNode(n));const a=this.getEdgesInvolvingNode(n).map(c=>c.getOtherNodeId(n)).filter(c=>!t.has(c));o.push(...a)}return s}getEdgesInvolvingNode(e){return this.edges.filter(t=>t.fromId===e||t.toId===e)}getEdgesInvolvingNodes(e){return this.edges.filter(t=>e.includes(t.fromId)&&e.includes(t.toId))}cleanupEdges(){this.edges=this.edges.filter(e=>e.fromId!==e.toId)}removeDuplicateEdges(){const e=new Set;this.edges=this.edges.filter(t=>{const s=`${Math.min(t.fromId,t.toId)}-${Math.max(t.fromId,t.toId)}`;return e.has(s)?!1:(e.add(s),!0)})}getEdgesWithBothEndsInNodes(e){return this.edges.filter(t=>e.includes(t.fromId)&&e.includes(t.toId))}fromJSON(e){this.nodes={},this.edges=[];for(const[,t]of Object.entries(e.nodes))this.setNode(new p(t.id,t.coordinates,t.radius,t.strokeWidth,t.fillColor,t.strokeColor));for(const t of e.edges)this.addEdge(t.fromId,t.toId,t.color,t.weight);"scalingFactor"in e&&(this.scalingFactor=new y(e.scalingFactor.x,e.scalingFactor.y)),"zigzagSpacing"in e&&(this.zigzagSpacing=e.zigzagSpacing),"zigzagLength"in e&&(this.zigzagLength=e.zigzagLength),this.cleanupEdges()}toDrawables(){const e=[],t=Math.max(this.scalingFactor.x,this.scalingFactor.y);for(const s of this.edges){const o=this.getNode(s.fromId),n=this.getNode(s.toId);if(o&&n){const a=new y(o.coordinates.x*this.scalingFactor.x,o.coordinates.y*this.scalingFactor.y),c=new y(n.coordinates.x*this.scalingFactor.x,n.coordinates.y*this.scalingFactor.y);e.push(new ae(a,c,!0,s.color,s.weight*t,this.zigzagSpacing*t,this.zigzagLength*t,this.zigzagEndLengths*t))}else throw new Error(`Node with id ${s.fromId} or ${s.toId} does not exist in the graph.`)}for(const s of Object.values(this.nodes)){const o=new y(s.coordinates.x*this.scalingFactor.x,s.coordinates.y*this.scalingFactor.y);e.push(new ve(o,s.radius*t,s.strokeWidth*t,s.fillColor,s.strokeColor))}return e}findNodesByCoordinates(e,t){let s=[];for(const[,o]of Object.entries(this.nodes))Math.sqrt(Math.pow(o.coordinates.x-e,2)+Math.pow(o.coordinates.y-t,2))<=5&&s.push(o);return s}findNodeByCoordinates(e,t){const s=this.findNodesByCoordinates(e,t);return s.length>0?s[0]:null}deleteNode(e){if(!this.getNode(e))throw new Error("The node does not exist in the graph.");delete this.nodes[e];for(let s=0;s<this.edges.length;s++)(this.edges[s].fromId===e||this.edges[s].toId===e)&&(this.edges.splice(s,1),s--)}deleteEdge(e){if(e instanceof ge&&(e=this.edges.indexOf(e)),e<0||e>=this.edges.length)throw new Error("Invalid edge ID "+e+". Edge ID must be between 0 and "+(this.edges.length-1)+".");const t=this.edges[e];return this.edges.splice(e,1),t}}const d=new Re;class Fe{constructor(){r(this,"selectedItems",[])}toggleItems(e){e.forEach(t=>{this.hasItem(t)?this.removeItem(t):this.addItem(t)})}addItem(e){this.selectedItems.push(e)}setItem(e){this.selectedItems=[e]}hasItem(e){return this.selectedItems.includes(e)}hasItems(e){return e.every(t=>this.hasItem(t))}setSelectedItems(e){this.selectedItems=e}removeItem(e){this.selectedItems=this.selectedItems.filter(t=>t!==e)}removeLastItem(){this.selectedItems.length>0&&this.selectedItems.pop()}getSelectedItems(){return this.selectedItems}getItemsOfClass(e){return this.selectedItems.filter(t=>t instanceof e)}clearSelection(){this.selectedItems=[]}get empty(){return this.selectedItems.length===0}get length(){return this.selectedItems.length}}const h=new Fe;class We{constructor(e){r(this,"doneStack",[]);r(this,"undoneStack",[]);r(this,"afterActionCallback");this.afterActionCallback=e}addAction(e){this.doneStack.push(e),e.do(),this.undoneStack=[],this.afterActionCallback()}undo(){if(this.doneStack.length){const e=this.doneStack.pop();e.undo(),this.undoneStack.push(e),this.afterActionCallback()}}redo(){if(this.undoneStack.length){const e=this.undoneStack.pop();e.do(),this.doneStack.push(e),this.afterActionCallback()}}}class re{constructor(e,t,s){r(this,"affectedNodes");r(this,"originalValues");r(this,"targetValue");r(this,"property");this.affectedNodes=e,this.originalValues=e.map(o=>o[s]),this.targetValue=t,this.property=s}do(){this.affectedNodes.forEach(e=>{e[this.property]=this.targetValue})}undo(){this.affectedNodes.forEach((e,t)=>{e[this.property]=this.originalValues[t]})}}class Te{constructor(e){this.nodes=e}do(){this.nodes.forEach(e=>{d.setNode(new p(e.id,e.coordinates,e.radius,e.strokeWidth,e.fillColor,e.strokeColor))}),h.setSelectedItems(this.nodes.map(e=>d.getNode(e.id)))}undo(){this.nodes.forEach(e=>{d.deleteNode(e.id)})}}class we{constructor(e,t){this.nodeId=e,this.position=t}do(){d.setNode(new p(this.nodeId,this.position,parseFloat(document.getElementById("vertexRadius").value),parseFloat(document.getElementById("vertexStrokeWidth").value),document.getElementById("nodeFillColor").value,document.getElementById("nodeColor").value)),h.setItem(d.getNode(this.nodeId))}undo(){d.deleteNode(this.nodeId)}}class Ee{constructor(e){r(this,"affectedEdges",[]);this.affectedNodes=e}do(){this.affectedNodes.forEach(e=>{d.getEdgesInvolvingNode(e.id).forEach(t=>{this.affectedEdges.push(t)}),h.removeItem(e),d.deleteNode(e.id)})}undo(){this.affectedNodes.forEach(e=>{d.setNode(e),h.addItem(e)}),this.affectedEdges.forEach(e=>{d.addEdge(e.fromId,e.toId,e.color,e.weight)})}}class j{constructor(e,t=!1){r(this,"previousSelectedNodes",h.getSelectedItems());this.affectedNodes=e,this.clearSelection=t}do(){this.clearSelection?h.setSelectedItems(this.affectedNodes):this.affectedNodes.forEach(e=>{h.addItem(e)})}undo(){h.setSelectedItems(this.previousSelectedNodes)}}class Ze{constructor(e){r(this,"previousSelectedNodes",h.getSelectedItems());this.affectedNodes=e,this.affectedNodes.forEach(t=>{this.previousSelectedNodes.includes(t)||console.warn("Trying to unselect a node that is not selected")}),console.log("Unselecting nodes:",this.affectedNodes)}do(){h.setSelectedItems(this.previousSelectedNodes.filter(e=>!(e instanceof p&&this.affectedNodes.includes(e))))}undo(){h.setSelectedItems(this.previousSelectedNodes)}}class Xe{constructor(e=h.getItemsOfClass(p)){this.previousSelectedNodes=e}do(){h.setSelectedItems(d.getAllNodes())}undo(){h.setSelectedItems(this.previousSelectedNodes)}}class De{constructor(e=h.getSelectedItems()){this.previousSelectedNodes=e}do(){h.clearSelection()}undo(){h.setSelectedItems(this.previousSelectedNodes)}}class Pe{constructor(e=h.getSelectedItems()){this.previousSelectedNodes=e}do(){h.toggleItems(d.getAllNodes())}undo(){h.setSelectedItems(this.previousSelectedNodes)}}class Ye{constructor(e,t){r(this,"edgeIds",[]);if(this.edgesFrom=e,this.edgesTo=t,e.length!==t.length)throw new Error("edgesFrom and edgesTo must have the same length")}do(){for(let e=0;e<this.edgesFrom.length;e++)this.edgeIds.push(d.addEdge(this.edgesFrom[e],this.edgesTo[e],document.getElementById("edgeColor").value,parseFloat(document.getElementById("lineWidth").value)))}undo(){this.edgeIds.slice().reverse().forEach(e=>{d.deleteEdge(e)})}}class Se{constructor(e,t){r(this,"edgeIds",[]);this.fromNode=e,this.affectedNodes=t}do(){this.affectedNodes.forEach(e=>{this.edgeIds.push(d.addEdge(this.fromNode.id,e.id,document.getElementById("edgeColor").value,parseFloat(document.getElementById("lineWidth").value)))}),this.affectedNodes.length<=1&&h.setItem(this.fromNode)}undo(){this.edgeIds.slice().reverse().forEach(e=>{d.deleteEdge(e)}),h.setSelectedItems(this.affectedNodes)}}class Ve{constructor(e,t){r(this,"edges",[]);this.additionalNode=t,t&&e.push(t),this.edges=d.getEdgesInvolvingNodes(e.map(s=>s.id))}do(){this.edges.forEach(e=>{d.deleteEdge(e)}),this.additionalNode&&h.addItem(this.additionalNode)}undo(){this.edges.forEach(e=>{d.addEdge(e.fromId,e.toId,e.color,e.weight)}),this.additionalNode&&h.removeItem(this.additionalNode)}}class $e{constructor(e,t){r(this,"svg");r(this,"lastElement");r(this,"currentGroup",null);r(this,"prevState",null);r(this,"currentXOffset",0);r(this,"currentYOffset",0);r(this,"currentRotationRad",0);r(this,"currentX",0);r(this,"currentY",0);r(this,"canvas");r(this,"globalAlpha",1);r(this,"globalCompositeOperation");r(this,"fillStyle");r(this,"strokeStyle");r(this,"filter");r(this,"imageSmoothingEnabled");r(this,"imageSmoothingQuality");r(this,"lineCap","butt");r(this,"lineDashOffset");r(this,"lineJoin","round");r(this,"lineWidth",0);r(this,"miterLimit");r(this,"shadowBlur");r(this,"shadowColor");r(this,"shadowOffsetX");r(this,"shadowOffsetY");r(this,"direction","ltr");r(this,"font");r(this,"fontKerning");r(this,"fontStretch","normal");r(this,"fontVariantCaps","normal");r(this,"letterSpacing");r(this,"textAlign","left");r(this,"textBaseline");r(this,"textRendering");r(this,"wordSpacing");this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.setAttribute("width",e.toString()),this.svg.setAttribute("height",t.toString()),this.lastElement=this.svg}addElement(e){this.currentGroup?this.currentGroup.appendChild(e):this.svg.appendChild(e),this.lastElement=e}pointIsOnCanvas(e){const t={width:parseFloat(this.svg.getAttribute("width")),height:parseFloat(this.svg.getAttribute("height"))};return e.x>=0&&e.x<=t.width&&e.y>=0&&e.y<=t.height}rect(e,t,s,o){const n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x",e.toString()),n.setAttribute("y",t.toString()),n.setAttribute("width",s.toString()),n.setAttribute("height",o.toString()),this.addElement(n)}clearRect(e,t,s,o){this.rect(e,t,s,o),this.lastElement.setAttribute("style","background-color: white; fill: white;")}fillRect(e,t,s,o){this.rect(e,t,s,o),this.lastElement.setAttribute("style",this.stylesToCSS(!0,!1)+";stroke:none;")}strokeRect(e,t,s,o){this.rect(e,t,s,o),this.lastElement.setAttribute("style",this.stylesToCSS(!1,!0)+";fill:none;")}arc(e,t,s,o,n){const a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx",e.toString()),a.setAttribute("cy",t.toString()),a.setAttribute("r",s.toString()),a.setAttribute("style",this.stylesToCSS(!0,!0)),this.addElement(a)}moveTo(e,t){this.currentX=e,this.currentY=t}rotate(e){this.currentRotationRad+=e}translate(e,t){this.currentXOffset+=e,this.currentYOffset+=t}lineTo(e,t){const s=document.createElementNS("http://www.w3.org/2000/svg","line"),o=Math.cos(this.currentRotationRad)*this.currentX-Math.sin(this.currentRotationRad)*this.currentY,n=Math.sin(this.currentRotationRad)*this.currentX+Math.cos(this.currentRotationRad)*this.currentY,a=Math.cos(this.currentRotationRad)*e-Math.sin(this.currentRotationRad)*t,c=Math.sin(this.currentRotationRad)*e+Math.cos(this.currentRotationRad)*t,l=new y(o+this.currentXOffset,n+this.currentYOffset),u=new y(a+this.currentXOffset,c+this.currentYOffset);s.setAttribute("x1",l.x.toString()),s.setAttribute("y1",l.y.toString()),s.setAttribute("x2",u.x.toString()),s.setAttribute("y2",u.y.toString()),s.setAttribute("style",this.stylesToCSS(!1,!0)),this.lineCap&&s.setAttribute("stroke-linecap",this.lineCap),(this.pointIsOnCanvas(l)||this.pointIsOnCanvas(u)||l.x<=0&&u.x>=parseFloat(this.svg.getAttribute("width"))||l.y<=0&&u.y>=parseFloat(this.svg.getAttribute("height")))&&this.addElement(s),this.currentX=e,this.currentY=t}stroke(){this.addStyles(this.stylesToCSS(!1,!0))}fill(e,t){if(e||t)throw new Error("Method not implemented.");this.addStyles(this.stylesToCSS(!0,!1))}addStyles(e){if(this.lastElement){const t=this.lastElement.getAttribute("style"),s=this.parseStyles(e);if(t){const o=this.parseStyles(t);for(const[n,a]of Object.entries(o))s[n]||(s[n]=a)}this.lastElement.setAttribute("style",this.styleMapToString(s));for(const[o,n]of Object.entries(s))this.lastElement.setAttribute(o,n)}}parseStyles(e){const t={};return e.split(";").forEach(o=>{const[n,a]=o.trim().split(":");t[n.trim()]=a.trim()}),t}styleMapToString(e){return Object.entries(e).map(([t,s])=>`${t}: ${s}`).join("; ")}restore(){if(this.prevState)this.fillStyle=this.prevState.fillStyle,this.strokeStyle=this.prevState.strokeStyle,this.lineWidth=this.prevState.lineWidth,this.currentX=this.prevState.currentX,this.currentY=this.prevState.currentY,this.lastElement=this.prevState.lastElement,this.currentXOffset=this.prevState.currentXOffset,this.currentYOffset=this.prevState.currentYOffset,this.currentRotationRad=this.prevState.currentRotationRad,this.prevState=null,this.currentGroup=null;else throw new Error("No state to restore.")}save(){if(this.prevState)throw new Error("Only one state can be saved at a time.");this.prevState={fillStyle:this.fillStyle,strokeStyle:this.strokeStyle,lineWidth:this.lineWidth,currentX:this.currentX,currentY:this.currentY,lastElement:this.lastElement,currentXOffset:this.currentXOffset,currentYOffset:this.currentYOffset,currentRotationRad:this.currentRotationRad};const e=document.createElementNS("http://www.w3.org/2000/svg","g");this.svg.appendChild(e),this.lastElement=e,this.currentGroup=e}stylesToCSS(e=!0,t=!0){let s={"stroke-width":this.lineWidth.toString(),"stroke-linecap":this.lineCap||"butt"};return e&&this.fillStyle&&(s.fill=this.fillStyle.toString()),t&&this.strokeStyle&&(s.stroke=this.strokeStyle.toString()),this.styleMapToString(s)}getSVG(){return this.svg}beginPath(){}closePath(){}getContextAttributes(){throw new Error("Method not implemented.")}drawImage(e,t,s,o,n,a,c,l,u){throw new Error("Method not implemented.")}clip(e,t){throw new Error("Method not implemented.")}isPointInPath(e,t,s,o){throw new Error("Method not implemented.")}isPointInStroke(e,t,s){throw new Error("Method not implemented.")}createConicGradient(e,t,s){throw new Error("Method not implemented.")}createLinearGradient(e,t,s,o){throw new Error("Method not implemented.")}createPattern(e,t){throw new Error("Method not implemented.")}createRadialGradient(e,t,s,o,n,a){throw new Error("Method not implemented.")}createImageData(e,t,s){throw new Error("Method not implemented.")}getImageData(e,t,s,o,n){throw new Error("Method not implemented.")}putImageData(e,t,s,o,n,a,c){throw new Error("Method not implemented.")}arcTo(e,t,s,o,n){throw new Error("Method not implemented.")}scale(e,t){throw new Error("Method not implemented.")}bezierCurveTo(e,t,s,o,n,a){throw new Error("Method not implemented.")}ellipse(e,t,s,o,n,a,c,l){throw new Error("Method not implemented.")}quadraticCurveTo(e,t,s,o){throw new Error("Method not implemented.")}roundRect(e,t,s,o,n){throw new Error("Method not implemented.")}getLineDash(){throw new Error("Method not implemented.")}setLineDash(e){throw new Error("Method not implemented.")}isContextLost(){throw new Error("Method not implemented.")}reset(){throw new Error("Method not implemented.")}fillText(e,t,s,o){throw new Error("Method not implemented.")}measureText(e){throw new Error("Method not implemented.")}strokeText(e,t,s,o){throw new Error("Method not implemented.")}getTransform(){throw new Error("Method not implemented.")}resetTransform(){throw new Error("Method not implemented.")}setTransform(e,t,s,o,n,a){throw new Error("Method not implemented.")}transform(e,t,s,o,n,a){throw new Error("Method not implemented.")}drawFocusIfNeeded(e,t){throw new Error("Method not implemented.")}}function Ie(i,e){for(;i.x>e.x;)i.x-=e.x*2;for(;i.x<-e.x;)i.x+=e.x*2;for(;i.y>e.y;)i.y-=e.y*2;for(;i.y<-e.y;)i.y+=e.y*2;return i}function xe(i,e){for(;i.x<0;)i.x+=e.x;for(;i.x>e.x;)i.x-=e.x;for(;i.y<0;)i.y+=e.y;for(;i.y>e.y;)i.y-=e.y;return i}function qe(i,e){const t=new I(i.coordinates.x,i.coordinates.y);return new I(e.coordinates.x,e.coordinates.y).subtract(t)}function Ge(){const i=new I(S.instance.canvasSize.y,S.instance.canvasSize.x),e=i.multiply(.5);console.log("Box size: "+i.toString(),[e,i]),h.getItemsOfClass(p).forEach(s=>{const o=d.getNodesConnectedToNode(s.id);let n=new I(0,0);o.forEach(c=>{const l=qe(s,c),u=Ie(l,e).multiply(1/o.length);n=n.add(u)}),console.log(`Node ${s.id} has force: ${n.toString()}`);const a=xe(new I(n.x+s.coordinates.x,n.y+s.coordinates.y),i);s.coordinates.x=a.x,s.coordinates.y=a.y})}function He(i){const e=new I(S.instance.canvasSize.x,S.instance.canvasSize.y),t=document.getElementById("randomWalkStepSize").valueAsNumber,s=document.getElementById("randomWalkMaxAngle").valueAsNumber*Math.PI/180,o=document.getElementById("randomWalkSteps").valueAsNumber,n=[],a=[],c=document.getElementById("vertexRadius").valueAsNumber,l=document.getElementById("vertexStrokeWidth").valueAsNumber,u=document.getElementById("nodeFillColor").value,m=document.getElementById("nodeColor").value,z=new p(d.getNextNodeId(),i,c,l,u,m);n.push(z);let x=new y(i.x,i.y),N=Math.random()*2*Math.PI;const q=document.getElementById("edgeColor").value,G=parseFloat(document.getElementById("lineWidth").value);for(let _=0;_<o;_++){const X=(Math.random()*2-1)*s;N+=X;const O=x.x+t*Math.cos(N),W=x.y+t*Math.sin(N);x=new y(O,W),x=xe(x,e);const k=new p(d.getNextNodeId()+_+1,x,c,l,u,m);n.push(k);const C=n[n.length-2],R=new ge(C.id,k.id,-1,G,q);a.push(R)}return{nodes:n,edges:a}}function Ue(){const i=h.getItemsOfClass(p);if(console.log("Equilibrating "+i.length+" nodes..."),i.length<1)return;const t=new I(S.instance.canvasSize.x,S.instance.canvasSize.y).multiply(.5),s=25;for(const o of i){let n=new I(0,0);for(const c of d.getAllNodes()){if(o.id===c.id)continue;const l=new I(o.coordinates.x,o.coordinates.y);let m=new I(c.coordinates.x,c.coordinates.y).subtract(l);m=Ie(m,t);const z=Math.sqrt(m.x*m.x+m.y*m.y);if(z>0){const x=s/(z*z),N=m.multiply(-x);n=n.add(N)}}console.log(`Node ${o.id} experiences force: ${n.toString()} and has radius ${o.radius}...`),n.x>o.radius&&(n.x=o.radius),n.x<-o.radius&&(n.x=-o.radius),n.y>o.radius&&(n.y=o.radius),n.y<-o.radius&&(n.y=-o.radius);const a=new I(o.coordinates.x+n.x,o.coordinates.y+n.y);o.coordinates=a}}function Ne(i,e){if(i===e)return;if(i>e)return Ne(e,i);d.getEdgesInvolvingNode(e).forEach(n=>{n.fromId===e?n.fromId=i:n.toId=i});const s=d.getNode(i),o=d.getNode(e);s.coordinates.x=(s.coordinates.x+o.coordinates.x)/2,s.coordinates.y=(s.coordinates.y+o.coordinates.y)/2,d.deleteNode(e)}function Je(i){let e;do{e=!1;for(const t of d.getAllEdges())if(t.color===i){Ne(t.fromId,t.toId),d.deleteEdge(t),e=!0;break}}while(e);h.clearSelection()}function Ke(){const i=d.getAllNodes();for(const e of i){const t=d.getEdgesInvolvingNode(e.id);t.length===2&&t[0].color===t[1].color&&t[0].weight===t[1].weight&&(d.deleteEdge(t[0]),d.deleteEdge(t[1]),d.addEdge(t[0].fromId==e.id?t[0].toId:t[0].fromId,t[1].fromId==e.id?t[1].toId:t[1].fromId,t[0].color,t[0].weight),d.deleteNode(e.id))}}const v=class v{static hex2lab(e){const[t,s,o]=v.hex2rgba(e);return v.rgba2lab(t,s,o,1)}static rgba2lab(e,t,s,o){const[n,a,c]=v.rgb2xyz(e,t,s);return v.xyz2lab(n,a,c)}static lab2rgba(e,t,s){const[o,n,a]=v.lab2xyz(e,t,s);return[...v.xyz2rgba(o,n,a),1]}static hex2rgba(e){const t=e.replace(/^#/,"").toUpperCase();if(!/^[0-9A-F]+$/i.test(t)||![3,4,6,8].includes(t.length))throw new Error(`Invalid HEX format: ${e}`);let o=t;[3,4].includes(t.length)&&(o=t.split("").map(m=>m+m).join(""));const n=parseInt(o,16);let a,c,l,u=1;return o.length===8?(u=(n&255)/255,a=n>>16&255,c=n>>8&255,l=n&255):(a=n>>16&255,c=n>>8&255,l=n&255),[Math.min(255,Math.max(0,a)),Math.min(255,Math.max(0,c)),Math.min(255,Math.max(0,l)),Math.min(1,Math.max(0,u))]}static rgb2xyz(e,t,s){const o=l=>l>.04045?Math.pow((l+.055)/1.055,2.4):l/12.92,[n,a,c]=[e/255,t/255,s/255].map(l=>o(l)*100);return[n*.4124564+a*.3575761+c*.1804375,n*.2126729+a*.7151522+c*.072175,n*.0193339+a*.119192+c*.9503041]}static xyz2rgba(e,t,s){const o=u=>(u=u>.0031308?1.055*Math.pow(u,.4166666666666667)-.055:12.92*u,Math.round(Math.min(255,Math.max(0,u*255)))),n=[e/100,t/100,s/100],a=n[0]*3.2404542+n[1]*-1.5371385+n[2]*-.4985314,c=n[0]*-.969266+n[1]*1.8760108+n[2]*.041556,l=n[0]*.0556434+n[1]*-.2040259+n[2]*1.0572252;return[o(a),o(c),o(l)]}static xyz2lab(e,t,s){const o=l=>l>.008856?Math.pow(l,.3333333333333333):7.787*l+.13793103448275862,n=o(e/v.REF_X),a=o(t/v.REF_Y),c=o(s/v.REF_Z);return[116*a-16,500*(n-a),200*(a-c)]}static lab2xyz(e,t,s){const o=(e+16)/116,n=t/500+o,a=o-s/200,c=l=>l>.2068966?Math.pow(l,3):(l-16/116)/7.787;return[c(n)*v.REF_X,c(o)*v.REF_Y,c(a)*v.REF_Z]}static deltaE00(e,t){const[s,o,n]=e,[a,c,l]=t,u=ce=>ce*180/Math.PI,m=ce=>ce*Math.PI/180,z=1,x=1,N=1,q=Math.sqrt(o**2+n**2),G=Math.sqrt(c**2+l**2),_=(q+G)/2,X=.5*(1-Math.sqrt(_**7/(_**7+25**7))),O=o*(1+X),W=c*(1+X),k=Math.sqrt(O**2+n**2),C=Math.sqrt(W**2+l**2),R=n===0&&O===0?0:u(Math.atan2(n,O))%360,D=l===0&&W===0?0:u(Math.atan2(l,W))%360,te=a-s,se=C-k;let M=0;k*C!==0&&(M=D-R,M>180?M-=360:M<-180&&(M+=360));const H=2*Math.sqrt(k*C)*Math.sin(m(M)/2),U=(s+a)/2,P=(k+C)/2;let F=(R+D)/2;Math.abs(R-D)>180&&(F+=180);const ne=1-.17*Math.cos(m(F-30))+.24*Math.cos(m(2*F))+.32*Math.cos(m(3*F+6))-.2*Math.cos(m(4*F-63)),oe=1+.015*(U-50)**2/Math.sqrt(20+(U-50)**2),J=1+.045*P,ie=1+.015*P*ne,Be=30*Math.exp((-((F-275)/25))**2),Le=-(2*Math.sqrt(P**7/(P**7+25**7)))*Math.sin(m(2*Be));return Math.sqrt((te/(z*oe))**2+(se/(x*J))**2+(H/(N*ie))**2+Le*(se/(x*J))*(H/(N*ie)))}static adjustLightness(e,t,s,o,n){const[a,c,l]=v.rgba2lab(e,t,s,o),u=Math.min(100,Math.max(0,a+a*n));return[...v.lab2rgba(u,c,l)]}};r(v,"REF_X",95.047),r(v,"REF_Y",100),r(v,"REF_Z",108.883);let Q=v;var E=document.getElementById("canvas"),Y=document.getElementById("canvas-parent"),V=E.getContext("2d"),T=[],A="vertex",ee=0,g=S.instance,ue=!0,Z=null,f=new We(()=>w());function Ce(){V.clearRect(0,0,E.width,E.height),T.forEach(function(i){i.draw(V)})}E.addEventListener("click",function(i){if(!Z){var e=i.clientX-E.offsetLeft+window.scrollX,t=i.clientY-E.offsetTop+window.scrollY;if(A==="vertex")f.addAction(new we(ee,new y(e,t))),ee+=1;else if(A==="edge"){var s=d.findNodeByCoordinates(e,t);s!==null&&(h.empty?f.addAction(new j([s])):f.addAction(new Se(s,h.getItemsOfClass(p))))}else if(A==="delete_vertex"){var s=d.findNodeByCoordinates(e,t);s!==null&&f.addAction(new Ee([s]))}else if(A==="delete_edge"){var s=d.findNodeByCoordinates(e,t);s!==null&&!h.empty||h.length>1?f.addAction(new Ve(h.getItemsOfClass(p),s)):s&&f.addAction(new j([s]))}else if(A==="select"){var o=d.findNodesByCoordinates(e,t);o.length&&(h.hasItems(o)?(console.log("Unselecting node"),f.addAction(new Ze(o))):(console.log("Selecting node"),f.addAction(new j(o))))}else if(A==="select_chains"){const n=d.findNodeByCoordinates(e,t);if(n!==null){const a=d.deepConnectedTo(n);f.addAction(new j(a,!0))}}else if(A==="random_walk"){const n=He(new y(e,t));f.addAction(new Te(n.nodes)),f.addAction(new Ye(n.edges.map(a=>a.fromId),n.edges.map(a=>a.toId))),ee+=n.nodes.length+1}}});window.addEventListener("mousedown",function(i){Z={x:i.clientX,y:i.clientY}});window.addEventListener("mousemove",function(i){if(Z){const e=i.clientX-Z.x,t=i.clientY-Z.y;h.getItemsOfClass(p).forEach(s=>{s.coordinates.x+=e,s.coordinates.y+=t,s.coordinates.x<0&&(s.coordinates.x+=S.instance.canvasSize.x),s.coordinates.x>=S.instance.canvasSize.x&&(s.coordinates.x-=S.instance.canvasSize.x),s.coordinates.y<0&&(s.coordinates.y+=S.instance.canvasSize.y),s.coordinates.y>=S.instance.canvasSize.y&&(s.coordinates.y-=S.instance.canvasSize.y)}),Z={x:i.clientX,y:i.clientY},w()}});window.addEventListener("mouseup",function(i){Z=null});function $(i,e){const t=E.width,s=E.height;E.width=i,E.height=e;const o=E.width/t,n=E.height/s,a=Math.min(o,n),c=document.getElementById("resizeElements").checked;console.log("Resizing canvas",[c,o,n,a]);var l=d.getAllNodes();if(l.forEach(m=>{m.coordinates.x*=o,m.coordinates.y*=n,c&&(m.radius*=a,m.strokeWidth*=a)}),c){var u=d.getAllEdges();u.forEach(m=>{m.weight*=a}),d.zigzagLength*=a,d.zigzagSpacing*=a,d.zigzagEndLengths*=a}w({x:o,y:n})}function pe(){d.clear(),h.clearSelection(),B("vertex"),w()}function be(){f.addAction(new Xe)}function ze(){f.addAction(new De)}function ke(){f.addAction(new Pe)}function w(i={x:1,y:1}){var e=Math.max(i.x,i.y);const t=document.getElementById("backgroundColor").value,s=document.getElementById("borderColor").value;T=[new he({x:0,y:0},E.width,E.height,0,t,t)],T=T.concat(d.toDrawables()),T.push(new he({x:0,y:0},E.width,E.height,20*e,t)),T.push(new he({x:10*i.x,y:10*i.y},E.width-20*i.x,E.height-20*i.y,4*e,s)),ue&&!h.empty&&h.getItemsOfClass(p).forEach(o=>{T.push(new ve(o.coordinates,o.radius*1.2*e,2*e,null,"#ff0000"))}),Ce(),document.getElementById("graph-stats").textContent=`Nodes: ${d.getNrOfNodes()}, Edges: ${d.getNrOfEdges()}`}function de(i,e){const t=document.getElementById(i);t instanceof HTMLInputElement&&(t.value=e)}function je(){const i=document.getElementById("sideChainLength").valueAsNumber,e=document.getElementById("sideChainProb").valueAsNumber,t=document.getElementById("sideChainLengthRandomness").valueAsNumber,s=document.getElementById("sideChainAngleRandomness").valueAsNumber;h.getItemsOfClass(p).forEach(n=>{const a=d.getEdgesInvolvingNode(n.id);if(a.length!==2)return;const c=d.getNode(a[0].getOtherNodeId(n.id)),l=d.getNode(a[1].getOtherNodeId(n.id));if(!c||!l)return;const u=l.coordinates.x-c.coordinates.x,m=l.coordinates.y-c.coordinates.y,z=Math.sqrt(u*u+m*m),x=u/z,N=m/z,q=-N,G=x,_=N,X=-x,O=Math.floor(e),W=e-O,k=O+(Math.random()<W?1:0);let C=Math.random()<.5;for(let R=0;R<k;R++){C=!C;const D=C?q:_,te=C?G:X,se=Math.PI*s,M=(Math.random()*2-1)*se,H=Math.cos(M),U=Math.sin(M),P=D*H-te*U,F=D*U+te*H,ne=n.coordinates.x+P*i*(1-t*Math.random()),oe=n.coordinates.y+F*i*(1-t*Math.random()),J=ee++,ie=new p(J,new y(ne,oe),n.radius,n.strokeWidth,n.fillColor,n.strokeColor);f.addAction(new we(J,new y(ne,oe))),f.addAction(new Se(n,[ie]))}})}window.addEventListener("load",()=>{Y.style.width=g.canvasSize.x+"px",Y.style.height=g.canvasSize.y+"px",de("canvasWidth",g.canvasSize.x),de("canvasHeight",g.canvasSize.y),$(g.canvasSize.x,g.canvasSize.y),pe();var i=document.getElementById("modeSwitch");i.addEventListener("click",function(){B(i.value)}),document.getElementById("vertexRadius").addEventListener("change",function(){if(h.empty)return;const t=parseFloat(this.value);f.addAction(new re(h.getItemsOfClass(p),t,"radius"))}),document.getElementById("vertexStrokeWidth").addEventListener("change",function(){if(h.empty)return;const t=parseFloat(this.value);f.addAction(new re(h.getItemsOfClass(p),t,"strokeWidth"))}),document.getElementById("nodeFillColor").addEventListener("change",function(){h.empty||f.addAction(new re(h.getItemsOfClass(p),this.value,"fillColor"))}),document.getElementById("nodeColor").addEventListener("change",function(){h.empty||f.addAction(new re(h.getItemsOfClass(p),this.value,"strokeColor"))}),document.getElementById("selectVerticesStroke").addEventListener("change",function(){console.log("selectVerticesStroke",[this.value,d.getAllNodes().map(t=>t.strokeColor)]),f.addAction(new j(d.getAllNodes().filter(t=>Q.deltaE00(Q.hex2lab(t.strokeColor),Q.hex2lab(this.value))<10),!0))}),document.getElementById("edgeColor").addEventListener("change",function(){d.getEdgesWithBothEndsInNodes(h.getItemsOfClass(p).map(t=>t.id)).forEach(t=>{t.color=this.value}),w()}),document.getElementById("lineWidth").addEventListener("change",function(){d.getEdgesWithBothEndsInNodes(h.getItemsOfClass(p).map(t=>t.id)).forEach(t=>{t.weight=parseFloat(this.value)}),w()}),document.getElementById("mergeConnectionColor").addEventListener("change",t=>{const s=t.target;Je(s.value),w()}),document.getElementById("canvasWidth").addEventListener("change",function(){const t=parseFloat(this.value);f.addAction(new class{constructor(){r(this,"targetValue",t);r(this,"previousValue",g.canvasSize.x)}setWidth(s){Y.style.width=s+"px",g.canvasSize.x=s,$(g.canvasSize.x,g.canvasSize.y),w(),document.getElementById("canvas-size").textContent=`Canvas size: ${g.canvasSize.x}x${g.canvasSize.y}`}do(){this.setWidth(this.targetValue)}undo(){this.setWidth(this.previousValue)}})}),document.getElementById("canvasHeight").addEventListener("change",function(){const t=parseFloat(this.value);f.addAction(new class{constructor(){r(this,"targetValue",t);r(this,"previousValue",g.canvasSize.y)}setHeight(s){Y.style.height=s+"px",g.canvasSize.y=s,$(g.canvasSize.x,g.canvasSize.y),w(),document.getElementById("canvas-size").textContent=`Canvas size: ${g.canvasSize.x}x${g.canvasSize.y}`}do(){this.setHeight(this.targetValue)}undo(){this.setHeight(this.previousValue)}})}),document.getElementById("disablePBC").addEventListener("change",function(){g.disablePBC=this.checked,w()}),document.getElementById("clearSelectionButton").addEventListener("click",ze),document.getElementById("invertSelectionButton").addEventListener("click",ke),document.getElementById("selectAllButton").addEventListener("click",be),document.getElementById("clearCanvasButton").addEventListener("click",pe),document.getElementById("removeDuplicateEdges").addEventListener("click",()=>{d.removeDuplicateEdges(),w()}),document.getElementById("removeSelfEdges").addEventListener("click",()=>{d.cleanupEdges(),w()}),document.getElementById("saveImageButton").addEventListener("click",Me),document.getElementById("forceBalanceStep").addEventListener("click",()=>{const t=document.getElementById("nForceBalanceSteps").valueAsNumber;for(let s=0;s<t;s++)console.log("Running force balance step "+s+" of "+t),Ge(),w()}),document.getElementById("positionEquilibrationStep").addEventListener("click",()=>{const t=document.getElementById("nPositionEquilibrationSteps").valueAsNumber;for(let s=0;s<t;s++)console.log("Running position equilibration step "+s+" of "+t),Ue(),w()}),document.getElementById("sideChainGenerationButton").addEventListener("click",()=>{je()}),document.getElementById("bifunctionalRemoval").addEventListener("click",()=>{Ke(),w()}),document.getElementById("exportGraphButton").addEventListener("click",Ae),document.getElementById("saveSvgButton").addEventListener("click",()=>{Qe()}),document.getElementById("import").addEventListener("change",et);const e=document.getElementsByClassName("redraw-onchange");Array.from(e).forEach(t=>{t instanceof HTMLInputElement&&t.addEventListener("change",()=>{w()})})});function B(i){f.addAction(new class{constructor(){r(this,"previousInteractionMode",A);r(this,"targetInteractionMode",i)}resetInteractionMode(e){console.log("Resetting interaction mode to: "+e),A=e,document.getElementById("modeSwitch").value=e}do(){this.resetInteractionMode(this.targetInteractionMode)}undo(){this.resetInteractionMode(this.previousInteractionMode)}})}function Me(){const i=document.getElementById("resizeElements"),e=i.checked;i.checked=!0,ue=!1,g.isScaled=!0;const t={x:g.canvasSize.x,y:g.canvasSize.y};g.canvasSize.x*=g.imageScaleFactor,g.canvasSize.y*=g.imageScaleFactor,$(g.canvasSize.x,g.canvasSize.y);const o=document.getElementById("canvas").toDataURL("image/png"),n=document.createElement("a");n.href=o,n.download="polymer-graph-sketch.png",n.click(),ue=!0,g.isScaled=!1,g.canvasSize.x=t.x,g.canvasSize.y=t.y,$(g.canvasSize.x,g.canvasSize.y),w(),i.checked=e}function Qe(){const i=V;V=new $e(g.canvasSize.x,g.canvasSize.y),Ce();const e=V.getSVG();V=i;const t=new XMLSerializer().serializeToString(e),s=document.createElement("a");s.href="data:image/svg+xml;base64,"+btoa(t),s.download="graph.svg",s.click()}function Ae(){var i=new Blob([JSON.stringify({graph:d,settings:g})],{type:"application/json"}),e=URL.createObjectURL(i),t=document.createElement("a");t.href=e,t.download="graph.json",t.click()}function et(){var s;const e=(s=document.getElementById("import").files)==null?void 0:s[0];if(!e)return;const t=new FileReader;t.onload=function(o){var n;if((n=o.target)!=null&&n.result){const a=JSON.parse(o.target.result);"settings"in a?(g=S.fromJSON(a.settings),Y.style.width=g.canvasSize.x+"px",Y.style.height=g.canvasSize.y+"px",de("canvasWidth",g.canvasSize.x),de("canvasHeight",g.canvasSize.y),$(g.canvasSize.x,g.canvasSize.y),d.fromJSON(a.graph)):d.fromJSON(a),ee=Math.max(...d.getAllNodeIds().filter(c=>!isNaN(c)))+1,w()}},t.readAsText(e)}document.addEventListener("keydown",function(i){i.ctrlKey||i.metaKey?i.key==="s"?(Me(),Ae()):i.key==="z"?i.shiftKey?f.redo():f.undo():i.key==="y"&&f.redo():i.key==="a"?be():i.key==="c"||i.key=="Escape"?ze():i.key=="i"?ke():i.key==="d"?B("delete_vertex"):i.key==="r"?B("random_walk"):i.key==="l"?B("delete_edge"):i.key==="s"?B("select"):i.key==="h"?B("select_chains"):i.key==="v"?B("vertex"):i.key==="e"?B("edge"):i.key==="Backspace"||i.key==="Delete"?f.addAction(new Ee(h.getItemsOfClass(p))):console.log("Unhandled keyboard shortcut: "+i.key)});
